# springboot-spring-kafka
## `> avro-3-serialization`

This sample demonstrates a **producer** that pushes `News` messages to a topic in `Kafka` and a **consumer** that listens those messages from `Kafka`
- Producer serializes the message `key` using `StringSerializer` and the message `value` using `KafkaAvroSerializer`
- Consumer deserializes message `key` using `StringSerializer` to the message `value` using `SpecificAvroWithSchemaDeserializer`
- This type of serialization/deserialization uses `Schema Registry`
- The Java class generated from the `Avro` schema **DO NOT** need to have the same `name` and `package (or namespace)` on producer and consumer
- We needed to implement the class `SpecificAvroWithSchemaDeserializer`

## How to run producer and consumer

> **Note:** before starting producer and consumer, the services present in `docker-compose.yml` file must be up and running as explained at [Start Environment](https://github.com/ivangfr/springboot-spring-kafka#start-environment) section of the main README

### avro-3-producer-service

- Open a terminal navigate to `springboot-spring-kafka` root folder

- Run application
  ```
  ./mvnw spring-boot:run --projects avro-3-serialization/avro-3-producer-service
  ```
  > The Java class `com.mycompany.avro3producerservice.avro.NewsMessage` was generated by the Avro file `news-message.avsc` present in `src/main/resources/avro` by running the command
  > ```
  > ./mvnw generate-sources --projects avro-3-serialization/avro-3-producer-service
  > ```

  As soon as the producer is up and running, it will start pushing automatically and randomly `News` messages to `Kafka` topic `avro-3-serialization-news`. The default `delay` between messages is `3 seconds`.

### avro-3-consumer-service

- Open another terminal and make sure you are in `springboot-spring-kafka` root folder

- Run application
  ```
  ./mvnw spring-boot:run --projects avro-3-serialization/avro-3-consumer-service
  ```
  > The Java class `com.mycompany.avro3consumerservice.avro.NewsMessage` was generated by the Avro file `news-message.avsc` present in `src/main/resources/avro` by running the command
  > ```
  > ./mvnw generate-sources --projects avro-3-serialization/avro-3-consumer-service
  > ```

  Once the consumer is up and running, it will start listening `News` messages from the `Kafka` topic `avro-3-serialization-news`
  
## How to stop producer and consumer

Go to the terminal where the applications are running and press `Ctrl+C`
